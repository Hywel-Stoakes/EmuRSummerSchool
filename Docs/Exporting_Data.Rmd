---
title: "Exporting Data from Emu"
output: html_notebook
---

To Export a TextGrid collection we can use 

```{r}
require(emuR)
## Run This if you have not yet loaded the ae database
# create demo data including an emuDB called "ae"
# for a local project change the path (each folder inside its own parentheses)
# create_emuRdemoData(dir = file.path("/","cloud","project","DATA"))
#
# construct path to demo emuDB
# path2ae = file.path("/cloud/project/DATA", "emuR_demoData", "ae_emuDB")
#
#load emuDB into current R session
# ae = load_emuDB(path2ae)
```
## Export routines {#sec:emuRpackageDetails-exportRoutines}

Although associated with data loss, the `emuR` package provides an export routine to the common TextGrid collection format called `export_TextGridCollection()`. While exporting is sometimes unavoidable, it is essential that users are aware that exporting to other formats which do not support or only partially support hierarchical annotations structures will lead to the loss of the explicit linking information. Although the `autobuild_linkFromTimes()` can partially recreate some of the hierarchical structure, it is advised that the export routine be used with extreme caution. The R code snippet below shows how `export_TextGridCollection()` can be used to export the levels *Text*, *Syllable* and *Phonetic* of the *ae* demo `emuDB` to a TextGrid collection. Figure \@ref(fig:emuRfuncs-msajc003-fromExport) show the content of the created `msajc003.TextGrid` file as displayed by Praat's `"Draw visible sound and Textgrid..."` procedure.


```{r results='hide', message=FALSE}
# get the path to "ae" emuDB
path2ae = file.path(tempdir(), "emuR_demoData", "ae_emuDB")
# load "ae" emuDB
ae = load_emuDB(path2ae)
# export the levels "Text", "Syllable"
# and "Phonetic" to a TextGrid collection
export_TextGridCollection(ae,
                          targetDir = tempdir(),
                          attributeDefinitionNames = c("Text",
                                                       "Syllable",
                                                       "Phonetic"))
```



```{r emuRfuncs-msajc003-fromExport, fig.align="center", fig.cap="TextGrid annotation generated by the `export_TextGridCollection()` function containing the tiers (from top to bottom): *Text*, *Syllable*, *Phonetic*.", echo=FALSE, out.width = "75%"}
knitr::include_graphics("pics/msajc003_fromExport.png")
```

Depending on user requirements, additional export routines might be added to the `emuR` in the future.

